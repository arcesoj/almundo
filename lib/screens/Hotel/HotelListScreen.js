Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _class,_temp2,_jsxFileName='src/screens/Hotel/HotelListScreen.js';var _react=require('react');var _react2=_interopRequireDefault(_react);var _reactRedux=require('react-redux');var _reactNative=require('react-native');var _reactNativeElements=require('react-native-elements');var _expo=require('expo');var _expo2=_interopRequireDefault(_expo);require('@expo/vector-icons');var _HotelCard=require('./HotelCard');var _HotelCard2=_interopRequireDefault(_HotelCard);var _actions=require('../../containers/Hotel/actions');var _selectors=require('../../containers/Hotel/selectors');function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}XMLHttpRequest=GLOBAL.originalXMLHttpRequest?GLOBAL.originalXMLHttpRequest:GLOBAL.XMLHttpRequest;var AppScreen=(_temp2=_class=function(_Component){_inherits(AppScreen,_Component);function AppScreen(){var _ref;var _temp,_this,_ret;_classCallCheck(this,AppScreen);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=AppScreen.__proto__||Object.getPrototypeOf(AppScreen)).call.apply(_ref,[this].concat(args))),_this),_this.state={fontLoaded:true},_temp),_possibleConstructorReturn(_this,_ret);}_createClass(AppScreen,[{key:'componentWillMount',value:function componentWillMount(){this.props.dispatchGetAllHotels();this.keyboardDidHideListener=_reactNative.Keyboard.addListener('keyboardDidHide',this._keyboardDidHide);}},{key:'componentDidMount',value:function componentDidMount(){return regeneratorRuntime.async(function componentDidMount$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return regeneratorRuntime.awrap(_expo2.default.Font.loadAsync({MaterialIcons:require('@expo/vector-icons/fonts/MaterialIcons.ttf'),FontAwesome:require('@expo/vector-icons/fonts/FontAwesome.ttf')}));case 2:this.setState({fontLoaded:true});case 3:case'end':return _context.stop();}}},null,this);}},{key:'componentWillUnmount',value:function componentWillUnmount(){this.keyboardDidHideListener.remove();}},{key:'_keyboardDidHide',value:function _keyboardDidHide(){}},{key:'handleRefreshing',value:function handleRefreshing(){this.props.dispatchResfreshHotelList();}},{key:'searchHotel',value:function searchHotel(searchText){this.props.dispatchSearch(searchText);if(searchText.trim().length===0)_reactNative.Keyboard.dismiss();}},{key:'clearSearchBar',value:function clearSearchBar(){this.props.dispatchSearch('');_reactNative.Keyboard.dismiss();}},{key:'render',value:function render(){var _this2=this;if(!this.state.fontLoaded){return _react2.default.createElement(_reactNative.View,{style:styles.containerStyle,__source:{fileName:_jsxFileName,lineNumber:88}},_react2.default.createElement(_reactNative.ActivityIndicator,{size:'large',color:'#e1b110',style:{flex:1,alignItems:'center',justifyContent:'center'},__source:{fileName:_jsxFileName,lineNumber:89}}));}return this.props.loading?_react2.default.createElement(_reactNative.View,{style:styles.containerStyle,__source:{fileName:_jsxFileName,lineNumber:103}},_react2.default.createElement(_reactNative.ActivityIndicator,{size:'large',color:'#e1b110',style:{flex:1,alignItems:'center',justifyContent:'center'},__source:{fileName:_jsxFileName,lineNumber:104}})):_react2.default.createElement(_reactNative.View,{style:{flex:1},__source:{fileName:_jsxFileName,lineNumber:115}},_react2.default.createElement(_reactNativeElements.SearchBar,{lightTheme:true,platform:'ios',onChangeText:function onChangeText(text){return _this2.searchHotel(text);},onClearText:function onClearText(){return _this2.clearSearchBar();},inputStyle:{backgroundColor:'white'},icon:{type:'awesome',name:'search',color:'#e1b110'},containerStyle:{backgroundColor:'white'},placeholder:'Search your hotel',__source:{fileName:_jsxFileName,lineNumber:116}}),_react2.default.createElement(_reactNative.FlatList,{renderItem:function renderItem(_ref2){var item=_ref2.item;return _react2.default.createElement(_HotelCard2.default,{key:''+item.id,navigation:_this2.props.navigation,hotel:item,__source:{fileName:_jsxFileName,lineNumber:127}});},data:this.props.data,keyExtractor:function keyExtractor(item){return item._id;},refreshControl:_react2.default.createElement(_reactNative.RefreshControl,{refreshing:this.props.refreshing,onRefresh:function onRefresh(){return _this2.handleRefreshing();},title:'Pull to refresh',tintColor:'#fff',titleColor:'#fff',__source:{fileName:_jsxFileName,lineNumber:135}}),__source:{fileName:_jsxFileName,lineNumber:125}}));}}]);return AppScreen;}(_react.Component),_class.navigationOptions=function(_ref3){var navigation=_ref3.navigation;return{title:'Lista de Hoteles',headerTitleStyle:{textAlign:'left',alignSelf:'center',color:'black',fontWeight:'bold'},headerStyle:{backgroundColor:'white'}};},_temp2);var styles={containerStyle:{flex:1,alignItems:'center',justifyContent:'center'}};var mapStateToProps=function mapStateToProps(state){var _state$hotel=state.hotel,loading=_state$hotel.loading,refreshing=_state$hotel.refreshing,error=_state$hotel.error,searchText=_state$hotel.searchText;var data=(0,_selectors.filteredItems)(state,searchText);return{loading:loading,refreshing:refreshing,data:data,error:error};};var mapDispatchToProps={dispatchGetAllHotels:function dispatchGetAllHotels(){return(0,_actions.getAllHotels)();},dispatchResfreshHotelList:function dispatchResfreshHotelList(){return(0,_actions.refreshHotelList)();},dispatchSearch:function dispatchSearch(searchText){return(0,_actions.searchHotel)(searchText);}};exports.default=(0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps)(AppScreen);